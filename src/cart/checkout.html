<template>
  <require from="../resources/currency-format"></require>
  <require from="aurelia-mask"></require>

  <div class="uk-section uk-padding-large uk-section-default">
    <div class="uk-container">

      <div uk-grid>
        <div class="uk-width-2-3">
          <div class="uk-card uk-card-body uk-card-default">
            <h2 class="uk-heading-line uk-text-center"><span>Shipping Information</span></h2>            
            <div class="uk-margin-medium">
              <form submit.delegate="submit()" uk-grid>
                <div class="uk-width-1-2" validation-errors.bind="firstNameErrors">
                  <label class="uk-form-label" for="first-name">First Name</label>
                  <div class="uk-form-controls">
                    <input class.bind="firstNameErrors.length ? 'uk-input uk-form-danger' : 'uk-input'" id="first-name" type="text" value.bind="firstName & validate">
                  </div>
                </div>
                <div class="uk-width-1-2" validation-errors.bind="lastNameErrors">
                  <label class="uk-form-label" for="last-name">Last Name</label>
                  <div class="uk-form-controls">
                    <input class.bind="lastNameErrors.length ? 'uk-input uk-form-danger' : 'uk-input'" id="last-name" type="text" value.bind="lastName & validate">
                  </div>
                </div>
                <div class="uk-width-2-3" validation-errors.bind="emailErrors">
                  <label class="uk-form-label" for="emailAddress">Email Address</label>
                  <div class="uk-form-controls">
                    <input class.bind="emailErrors.length ? 'uk-input uk-form-danger' : 'uk-input'" id="emailAddress" type="text" value.bind="emailAddress & validate">
                  </div>
                </div>
                <div class="uk-width-1-3" validation-errors.bind="phoneErrors">
                  <label class="uk-form-label" for="phone">Phone</label>
                  <div class="uk-form-controls">
                    <input class.bind="phoneErrors.length ? 'uk-input uk-form-danger' : 'uk-input'" id="phone" type="text" masked="value.bind: phone & validate; mask: (999) 999-9999;">
                  </div>
                </div>
                <div class="uk-width-3-4" validation-errors.bind="streetErrors">
                  <label class="uk-form-label" for="email">Street and Number</label>
                  <div class="uk-form-controls">
                    <input class.bind="streetErrors.length ? 'uk-input uk-form-danger' : 'uk-input'" id="street" type="text" value.bind="street & validate">
                  </div>
                </div>
                <div class="uk-width-1-4" validation-errors.bind="apartmentNumErrors">
                  <label class="uk-form-label" for="email">Apartment</label>
                  <div class="uk-form-controls">
                    <input class.bind="apartmentErrors.length ? 'uk-input uk-form-danger' : 'uk-input'" id="apartment" type="text" value.bind="apartment">
                  </div>
                </div>
                <div class="uk-width-1-2">
                  <label class="uk-form-label" for="country">Country</label>
                  <div class="uk-form-controls">
                    <select class="uk-select" id="country" value.bind="country">
                        <option repeat.for="country of countries" value.bind="country">${country}</option>
                    </select>
                  </div>
                </div>
                <div class="uk-width-1-2">
                  <label class="uk-form-label" for="province">Province</label>
                  <div class="uk-form-controls">
                    <select class="uk-select" id="province" value.bind="province">
                      <option repeat.for="province of provinces" value.bind="province">${province}</option>
                    </select>
                  </div>
                </div>
                <div class="uk-width-1-2" validation-errors.bind="cityErrors">
                  <label class="uk-form-label" for="city">City</label>
                  <div class="uk-form-controls">
                    <input class.bind="cityErrors.length ? 'uk-input uk-form-danger' : 'uk-input'" id="city" type="text" value.bind="city & validate">
                  </div>
                </div>
                <div class="uk-width-1-2" validation-errors.bind="postalCodeErrors">
                  <label class="uk-form-label" for="postalCode">Postal Code</label>
                  <div class="uk-form-controls">
                    <input class.bind="postalCodeErrors.length ? 'uk-input uk-form-danger' : 'uk-input'" id="postalCode" type="text" masked="value.bind: postalCode & validate; mask: A9A 9A9;"/>
                  </div>
                </div>
                <div class="uk-width-1-1">
                <div repeat.for="error of validator.errors" class="uk-alert-danger" uk-alert>
                  <p>${error.message}</p>
                </div>
                </div>
                <div class="uk-width-1-1">
                  <button type="submit" class="uk-button uk-button-primary uk-width-1-1 uk-margin-medium-top">Pay & Checkout</button>
                  <p class="uk-text-small uk-text-center">In demo land, everything is free! No need to enter your credit card details.</p>
                  <div>
              </form>
              </div>
              </div>
            </div>
            <div class="uk-width-1-3">
              <div class="uk-card uk-card-body uk-card-primary">
                <h3>Your Order</h3>
                <div id="totals" class="uk-margin-medium-bottom">
                  <div class="uk-grid-small uk-margin-remove-top" uk-grid>
                    <div class="uk-width-expand" uk-leader>Subtotal</div>
                    <div>${cart.subtotal | currencyFormat}</div>
                  </div>
                  <div class="uk-grid-small uk-margin-remove-top" uk-grid>
                    <div class="uk-width-expand" uk-leader>Taxes (13%)</div>
                    <div>${cart.taxes | currencyFormat}</div>
                  </div>
                  <div class="uk-grid-small uk-margin-remove-top" uk-grid>
                    <div class="uk-width-expand" uk-leader>Shipping</div>
                    <div>¯\_(ツ)_/¯</div>
                  </div>
                  <div class="uk-grid-small uk-margin-remove-top" uk-grid>
                    <div class="uk-width-expand" uk-leader>Total</div>
                    <div>${cart.total | currencyFormat}</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
</template>